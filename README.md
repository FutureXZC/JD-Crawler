# 超级简单的爬虫程序

## 页面抓取
整个步骤可以总结成：
1. 用urllib抓页面得到页面的源代码，存为out.html；
2. 用BeautifulSoup分析页面得到数据。

## 作者信息抓取
此处我仅使用事先已经获得的JD商城静态链接，而非自主通过程序搜索。
1. 在京东页面上找到作者信息。
2. 分析html文档结构后，发现用“ class="author_type_1" ”标识，然后找到它包含的a标签就能找到作者的名字，且经检验，这个标识只用来标记作者，可以使用。
3. 在这个a标签下，使用get_text()函数来获取内容，即获取作者。
4. 在获取作者信息的同时，进行计数。建立一个空的字典author。每次获取作者名字的时候查找其是否在字典内，若不在字典内，则将其作为新的属性加入并将数量设为1；如果已存在字典内，则数量加1。

## 归类
此时直接输出之前获取到的字典author，会发现作者的数量非常多，直接画成柱状图的话会显得十分拥挤。因此，为了达到作业要求示例图的效果，需要将出现次数过少的作者归类为“其他”。在这里，我将所有只出现1次的作者都归进“其他”。流程如下：
1. 建立一个空的副本字典author_s，只记录数量不为1的作者。
2. 设一个变量count作为计数器，每当发现一个数量为1的作者时，count就加1，这个变量后面会作为“其他”的数量。
3. 用sorted函数，指定用字典author的key作为排序的标准，对字典排序，然后根据每一项的数量是否为1，来决定是否将这一项存入副本auhtor_s中。
4. 循环筛选结束后，再补入“其他”，数量为count。此时author_s内只有数量不为1的作者和其他。

## 把“其他”放在最小的位置
在画图的时候，实际上就是把作者信息作为y轴，数量作为x轴，然后按照信息出现的顺序绘制柱状图。因此只需要控制好“其他”出现的位置，就能把它画在最下面。流程如下：
1. 把作者和数量的信息从字典中提取出来，分别存入y和x两个列表。
2. 由于“其他”属性和它的数量是我们最后单独加入字典的，因此在提取成x和y列表的时候，他们一定是在x和y的最后，我们只需要把他们pop出来，就能取得“其他”和它的数量。
3. 后期多次画图后发现，排在列表前面的内容会被画在下面，因此只需要把刚刚取出来的“其他”信息插回x和y列表的开头就可以了。

## 用纵向柱状图展示数据
要绘制柱状图，就要先引入matplotlib和numpy的包。程序的流程如下：
1. 生成一个10乘6的画布，这个大小足够清晰展示数据了。
2. 解决中文无法显示的问题，将sans-serif字体替换成SimHei，即黑体。
3. 由于有的外国人名字太长了，因此需要调整图像的位置。使用plt.subplots_adjust()函数，来设置上下左右的间隔。这个函数本来是用来设置子图间距的，即一个窗口中可以画多个子图，但此处我只画了一个柱状图，可以理解为这个距离就是与窗口边界的距离。
4. 为了美观以及更准确地核对数据，需要使用ax.grid()函数绘制格线，把格线的样式(linestyle)设为点状(:)，颜色为透明度0.5的灰色，这样既能看得清又不会由于颜色过深而影响观感。
5. 使用plt.barh()函数来绘制柱状图，barh函数可以绘制纵向延伸的柱状图，而bar可以绘制横向的。将之前准备好的x和y列表分别作为两坐标轴的数据传入，然后调整对其方式(aligh)为居中对齐(center)，颜色为透明度0.6的蓝色，半透明可以让颜色更加柔和。
6. 设置x轴和y轴的标签，并给图加上一个大标题。
7. 使用plt.show()函数来绘制柱状图。绘制结果如下图所示。

![example](/images/example.png)